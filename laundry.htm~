<html>
<head><title>Every Day Is Laundry Day</title></head>

<script language="JavaScript">

// Walker constructor.
function Walker() {
  this.direction = 0; // -1 for 'to the left', 1 for 'to the right'
  this.x_pos = 300;
  this.height = 100;
  this.width = 75;
}

// Mom constructor.
function Mom() {
  this.y_pos = 600;
  this.rate = 3;
}

// Baby constructor.
function Baby() {
  this.y_pos = 100;  
  this.rate = 5;
}

// Prototype chain.
Mom.prototype = new Walker();
Mom.prototype.constructor = Mom;
Baby.prototype = new Walker();
Baby.prototype.constructor = Baby;

// Garment constructor.
function Garment(xp, yp, de, r) {
  this.x_pos = xp;
  this.y_pos = yp;
  this.width = 90;
  this.height = 100;
  this.dom_element = de;
  this.rate = r;
  this.caught = false;
}

/*// GarmentQueue constructor
function GarmentQueue() {
  this.garments = new Array();
}*/

// the global Mom instance.
var mom = new Mom();

// the baby
var baby = new Baby();

// the falling clothes
var garment_queue = new Array();

// global game state variables.
var game_started = false;
var game_ended = false;
var garment_rate = 8000;
var garment_start = 100;
var score = 0;
var missed = 0;
var time = 90;

// Creates a new falling garment and
// schedules the addition of next garment.
function addNewGarment() {
  if (game_ended) {
    return;
  }
  var falling_speed = Math.floor(Math.random() * 3) + 1;
  var x_pos = Math.floor(Math.random() * 400);
  
  var dom_element = document.createElement("img");
  dom_element.setAttribute('src', 'garment.png');
  dom_element.setAttribute('height', '100');
  dom_element.setAttribute('width', '90');
  //dom_element.setAttribute('align', 'center');
  dom_element.setAttribute('border', '0');
  dom_element.setAttribute('vspace', '0');
  dom_element.style.left = '' + x_pos + 'px';
  dom_element.style.top = '' + garment_start + 'px';
  dom_element.style.position = 'absolute';
  
  var garment = new Garment(x_pos, garment_start, dom_element, falling_speed);
  
  garment_queue.push(garment);
  document.getElementById('the_body').appendChild(dom_element);
  
  setTimeout(function(){ addNewGarment(); },
             Math.floor(Math.random() * garment_rate));
 }
 
 // Moves mom or baby.
 function moveWalker(w) {
   if (w.x_pos >= 0 && w.x_pos <= 1000) {
     w.x_pos = w.x_pos + w.rate * w.direction;
     document.getElementById(w instanceof Mom ? 
                             'mom_container' : 'baby_container' ).style.top = w.x_pos;
   }
   w.x_pos = w.x_pos < 0    ?    0 : w.x_pos;
   w.x_pos = w.x_pos > 1000 ? 1000 : w.x_pos;
 }


// Returns true if items are close enough.
function inRange(pos_1, width_1, pos_2, width_2) {
  return !(pos_2 > pos_1 + width_1 || pos_1 > pos_2 + width_2);
}

function momCatchesGarments(m, g) {
  // Mom catches the whole row.
    


